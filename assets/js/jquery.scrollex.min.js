/* jquery.scrollex v0.2.1 | (c) @ajlkn | github.com/ajlkn/jquery.scrollex | MIT licensed */
(function($){var ids=1,queue={},$window=$(window),windowHeight,windowScrollTop,windowBottomEdge,windowTopEdge,isTouch="ontouchstart"in window;$window.on("scroll resize",function(){$window.trigger("scroll_handler")}).on("scroll_handler",function(){windowHeight=$window.height();windowScrollTop=$window.scrollTop();windowBottomEdge=windowScrollTop+windowHeight;windowTopEdge=windowScrollTop;$.map(queue,function(o){o.handler()})}).on("load",function(){$window.trigger("scroll_handler")});$.fn.scrollex=function(options){var $this=$(this);if(this.length==0)return $this;if(this.length>1){for(var i=0;i<this.length;i++)$(this[i]).scrollex(options);return $this}if($this.data("_scrollexId"))return $this;var id=ids++,element=$this[0],settings=$.extend({top:0,bottom:0,delay:0,mode:"default",enter:null,leave:null,initialize:null,terminate:null,scroll:null},options),test={};switch(settings.mode){case"top":test.check=function(){return windowTopEdge>=element.offsetTop+settings.top&&windowTopEdge<=element.offsetTop+element.offsetHeight-settings.bottom};break;case"bottom":test.check=function(){return windowBottomEdge>=element.offsetTop+settings.top&&windowBottomEdge<=element.offsetTop+element.offsetHeight-settings.bottom};break;case"middle":test.check=function(){var middle=windowTopEdge+windowHeight/2;return middle>=element.offsetTop+settings.top&&middle<=element.offsetTop+element.offsetHeight-settings.bottom};break;case"top-only":test.check=function(){return windowTopEdge>=element.offsetTop+settings.top&&windowTopEdge<=element.offsetTop+settings.bottom};break;case"bottom-only":test.check=function(){return windowBottomEdge>=element.offsetTop+element.offsetHeight-settings.bottom&&windowBottomEdge<=element.offsetTop+element.offsetHeight-settings.top};break;default:case"default":test.check=function(){return windowBottomEdge>=element.offsetTop+settings.top&&windowTopEdge<=element.offsetTop+element.offsetHeight-settings.bottom};break}test.state=false;test.handler=function(){var result=test.check();if(result!=test.state){test.state=result;if(test.state){if(settings.enter)settings.enter.apply(element)}else{if(settings.leave)settings.leave.apply(element)}}if(settings.scroll)settings.scroll.apply(element,[test.state?(windowBottomEdge-element.offsetTop-settings.top)/(element.offsetHeight-settings.top-settings.bottom):0])};queue[id]=test;$this.data("_scrollexId",id);if(settings.initialize)settings.initialize.apply(element);return $this};$.fn.unscrollex=function(){var $this=$(this);if($this.length==0)return $this;if($this.length>1){for(var i=0;i<$this.length;i++)$($this[i]).unscrollex();return $this}var id=$this.data("_scrollexId");if(!id)return $this;delete queue[id];$this.removeData("_scrollexId");return $this}})(jQuery);
